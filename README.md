# **요구사항 분석**



본격적인 팀플 시작에 앞서 프로젝트 주제 선정을 위해 현대인들이 가장 필요로하는 서비스는 어떤 것일까,

가장 많이하는 고민은 무엇일까 생각해보았습니다.

가장 먼저 떠오는 것은 '오늘 밥 뭐먹지?'였습니다.

그렇게 저희 마른오징어 팀의 프로젝트 주제는 반찬 정기구독 서비스로 정해졌습니다.

당장 오늘 먹을 메뉴조차 고르지 못해 고민하는 자취생이나

바쁜 일상에 치여 아침식사도 제대로 하지 못하는 직장인이 많습니다.

하지만 저희 서비스를 구독한다면 메뉴를 고민할 필요 없이 저희가 짜준 식단을 매 주 집 앞에서 만나볼 수 있습니다.

이러한 특징들을 살려 웹사이트의 이름을 '우렁각시'라고 짓게 되었습니다

# ★ 벤치마킹 사이트

1. 리치즈 박스

[리치즈박스](https://www.richzbox.co.kr)

2. 술담화

[찾아오는 인생술, 술담화](https://www.sooldamhwa.com)

3. 집반찬연구소



전반적인 초기데이터를 위한 크롤러를 위해 집반찬 연구소를 참고 하였습니다.

이외에도 요즘 웹 트랜드에 맞는 ‘미니멀리즘’을 추구하며 필요한 기능을 모두 갖고 있는 사이트인 리치즈 박스와 술담화를 벤치마킹하여 이를 토대로 기획 및 구현하게 되었습니다.

---

# **User Flow**
저희의 주요 메뉴는 총 3가지입니다.

첫 번째 메뉴 '정기구독'에서는 말 그대로 저희 반찬 배송 서비스를 구독할 수 있습니다.

두 번째 메뉴 '단품구매'에서는 원하는 상품을 직접 골라 받아볼 수 있습니다.

물론 정기구독과 단품구매는 동시에 구매 가능합니다.

세 번째 메뉴 '상품신청'에서는 추가되었으면 하는 메뉴를 고객이 글을 직접 작성하여 신청할 수 있습니다.

메인화면에서 정기구독 페이지로 넘어가면 국을 포함하여 구독신청을 할것인지 선택하게 됩니다.

선택하여 구독하기 버튼을 누르면 장바구니로 상품을 넘겨주는데,

이 때 로그인이 되어있지 않다면 로그인 페이지로 넘어가게 됩니다.

장바구니에서는 현재까지 담긴 장바구니 목록을 확인할 수 있으며,

바로 결제를 진행할 것인지 선택할 수 있습니다.

단품구매 페이지에서는 전체 상품목록을 볼 수 있습니다.

필터를 통해 메인메뉴와 사이드메뉴, 그리고 국을 선택해 볼 수 있고

검색기능을 통해 조금 더 직접적으로 찾아볼 수도 있습니다.

상품목록에 마우스를 올리게 되면 상품 상세보기 버튼과 장바구니 담기 버튼이 떠서

상품을 좀 더 자세히 알아보거나 바로 장바구니에 담아 구매를 진행할 수 있습니다.

물론 상세보기 페이지에서도 장바구니에 상품을 담을 수 있습니다.

사람들이 기존에 신청했던 메뉴들을 확인하고 검색해볼 수 있으며,

공감하는 메뉴가 있다면 좋아요를 눌러 추천도 할 수 있습니다.

상품목록과 마찬가지로 필터를 통해 추천 순, 최신 순, 내글보기로 정렬해볼 수 있습니다.

내글보기 필터는 로그인한 고객에게만 노출됩니다.

원하는 메뉴가 신청되어있지 않다면 상품 신청하기를 통하여 직접 원하는 메뉴를 신청할 수도 있습니다.

이 또한, 로그인이 되어있지 않다면 신청하기 버튼을 눌렀을 때 로그인 페이지로 넘어가게 됩니다.

본인이 작성한 글은 삭제는 가능하지만 수정은 불가능합니다.

대중적인 메뉴로 신청해두고 좋아요를 높힌 뒤, 괴상한 메뉴로 글 수정하는 것을 막기 위함이죠.

부가적인 페이지로는 로그인페이지, 회원가입페이지, 회원정보페이지가 있습니다.

---

# **ERD**


user flow를 토대로 erd를 작성하였습니다.

테이블은 총 7가지로 우선 고객정보와 신청게시판이 있고

장바구니의 단품주문, 상세주문, 구독주문 테이블,

그리고 상품과 밥상 테이블이 있습니다.

참고로 밥상 테이블은 고객이 구독 신청을 할 때 랜덤으로 배정되는 식단 테이블입니다.

각 장바구니와 게시판테이블은 고객아이디를 fk로 받아 고객정보테이블을 참조하였습니다.

상품테이블의 초기데이터는 집반찬연구소라는 사이트를 크롤링하여 데이터를 넣어주었습니다.

이 부분은 후에, 컨트롤러 부분에서 자세히 말씀드리겠습니다.

밥상테이블은 저희가 직접 데이터를 만들어 추가하였습니다.

구독주문테이블에서 구독시작일은 고객이 주문한 날 다음날로 지정되고 자동으로 시작일에 30일을 더해 만료일을 설정하게 됩니다.

대체로 모든 칼럼이 null값을 넣을 수 없지만 유일하게 null 값이 들어갈 수 있는 칼럼이 있습니다.

바로 신청게시판의 고객 아이디 칼럼인데요,

게시판테이블에서 fk인 고객아이디에 ON DELETE SET NULL을 설정하여

참조되는 부모 테이블의 행에 대한 DELETE를 허용하였습니다.

즉, 게시글 작성자가 탈퇴하여도 게시글은 남아있도록 하였습니다.

이와 반대로 주문테이블과 상세주문테이블, 구독주문테이블에서는 ON DELETE CASCADE를 통해

회원이 탈퇴할 시 주문 내역도 함께 삭제되도록 하였고

고객이 주문목록에 담은 상품은 삭제될 수 없도록 설정하였습니다.

또한, 상세주문테이블에서 CHECK 제약조건을 통해 주문수량이 0이나 음수가 될 수 없도록 하였습니다.

상품과 밥상테이블에서도 CHECK 제약조건을 사용하여 정해진 분류기준 외에는 데이터 입력이 되지 않게 막아주었습니다.

### ★ 수정후 변경 점

두 가지 수정사항이 있는데요,

버전1에선 회원가입 시에 휴대전화 번호와 우편번호를 NUMBER로 저장하였으나

앞자리가 0이면 번호가 누락되어 데이터가 변형되기 때문에 VARCHAR2로 변경해주었습니다.

또 다른 수정사항으로는, 구독주문과 밥상테이블에 국 포함여부 컬럼을 추가한 것입니다.

국을 포함한 구독 상품을 신청할 시에 구독주문 플러스 국 단품 주문, 총 2가지의 주문 정보를 만드려 하였으나

그것보다는 밥상 테이블 자체에서 해결하는 것이 데이터 관리상 효율적일것같아 칼럼을 추가했습니다.

---

# **로직 프로세스**


설계를 마친 유저플로우와 erd를 토대로 logic process를 완성했습니다.

유저플로우와 마찬가지로 최종본인 버전3만 함께 살펴보겠습니다.

전체적인 틀은 user flow와 유사합니다.

설계 이후 컨트롤러에서 구현하게 될 action들과,

각 action들에 사용될 DAO 그리고 페이지별로 input과 output되는 값들을 정리해주었습니다.

버전을 늘려가며 팀원들과 협의를 통하여 쳐내야 할 부분은 쳐내고 추가할 부분을 추가하여 대략적인 액션값과 받아야할 파라미터들을 지정해주었습니다

---

# **개발환경**


팀원들과의 개발환경의 통일성은 필수적이라고 생각됩니다.

기존에 인텔리제이를 사용하고 있었던 저였기에 과감히 팀프로젝트를 진행하는 동안은 이클립스 IDE (STS) 를 사용하여 통일감있게 작업하였습니다.

이외에 DBMS 같은 경우 가장 보편적으로 많이 사용되는 MYSQL 과 ORACLE 을 사용하여 되도록 범용성있게 관리자들을 배려한 프로그램을 설계하였습니다. 두가지의 DBMS 를 사용하는 것은 시간적으로 Model에 들이는 시간이 많아지며 테이블 생성시에도 고려해야할 사항이 많았지만 더 플러스가 되는 요인이라 판단되어 두가지 환경 모두를 지원하도록 설계후 구현하였습니다

★ 버전 관리같은 경우 각 팀원 모두 깃을 활용하였으며 브랜치를 통하여 pull, push 를 할 수 있도록 하였습니다. 최종 push 권한은 Master 인 조장으로 지정하여 모든 MVC 작업물들을 검토, 테스트 후 최종적으로 push 해주었습니다.

다소 아쉬었던 점은 버전관리에서 네이밍 하는 것에서 있었던것 같습니다.

v.a.b.c 라고 가정하였을 때 ( a : MVC 통합 , b : 비즈니스 메서드 (액션) 추가, c : 다른 조작없이 view 의 수정 ) 으로 버전 관리를 하였다면 더 효율적이고 보기 쉽게 정리할 수 있지 않았을까 합니다. 이 부분은 다음 프로젝트부터 버전관리를 철저하게 관리할 것입니다

---

# **Model**


상세주문테이블과, 단품주문테이블의 통합관리를 위해서 VO를 set해주었습니다.

이에따른 비즈니스 메서드 수행도 VO set을 리스트로 반환받아 컨트롤러에서 처리해주었습니다.


구독주문 DAO는 일반 주문 DAO와 달리 특이한 메서드가 사용됩니다.

바로 select random 메서드인데요,

고객이 구독상품을 신청하면 국포함 여부를 soup_check컬럼에서 확인하여

한달치의 식단을 랜덤으로 지정해줍니다.

저희 프로젝트의 정체성을 보여주는 부분이라고 할 수 있습니다.

그리고 특이점이라면 OrderSet 이 있습니다.

order single 과 order detail N개가 묶여있는 형태로 예를 들자면 한 게시글에 묶여있는 댓글과의 관계성을 띌 수 있도록 하였습니다.

관계도라고 한다면 order single 과 order detail은 1:N 의 관계를 띄게 됩니다.



# **View**


AJAX 를 사용한 비동기식 처리 방법입니다.

idCheck 과 passwordCheck 두가지 경우를 통과하여야만 submit 버튼이 abled 되도록 설정하였던 것이 특이점이라 할 수 있습니다.

**12.22 : 유저 파트, ajax 비동기 아이디 비밀번호 유효성 검사**

[성장형 프로그래머 : 네이버 블로그](https://blog.naver.com/wjddn3711/222605033590)

AJAX 의 특별한 점이라면 MVC 를 수행하는 것에 있는 특별함일 것 같습니다

우선 아이디를 예를 들자면 아이디 값을 특수한 이벤트 발생시 view -> controller 로 넘겨 받아 -> model (valid Id?) -> 컨트롤러에서 성공/ 실패

유무를 알려주도록 하는 이 일련의 과정들을 이해하고 사용함으로서 웹 개발의 무한한 가능성을 다시한번 느끼게되었습니다.

페이지의 이동없이 AJAX 를 토대로 id , pw validation을 진행하였으며 진행만 하는것이 아닌 만약 중복되는 아이디를 사용했다면 회원가입이 불가하도록 더 신경을 써주게 되었습니다


헤더나 푸터, preloader 등 뷰에서 반복되는 코드들을 커스텀 태그로 관리하여 응집도를 높혔습니다.

그리고 jstl과 이엘식을 적극 활용하여 자바 코드의 개입을 없애 협업에 용이하게 작업하였습니다.

또한 다음주소 API를 사용하여 사용자가 우편주소를 직접 찾아볼 필요없이 회원가입 창에서 조회할 수 있도록 해주었습니다

view 에서 불필요하게 중복되는 코드나 길어지는 코드들을 tag 를 사용하여 응집도를 높히는 과정이 핵심이 되었으며 이를 View 담당님이 너무 잘해주셔서 만족스러웠습니다.

View 는 비교적으로 Model, controller 가 모두 어느정도 틀을 잡은 후에 진행될 수 있는 부분들이 많아 초반에는 작업이 더뎠지만 부족한 부분을 각자의 파트가 아님에도 조원들이 협력하여 의견조율을 하고 가장 효율적인 페이지가 작성될 수 있도록 모두가 심혈을 기울였습니다.

---

# **컨트롤러**

모델과 뷰의 징검다리이자 중간에서 컨트롤하는 역할을 하는 컨트롤러를 필자가 맡게 되었습니다.

처음 팀프로젝트를 시작하며 가장 적성에 맞을것 같기도 하였고 가장 중요하다 생각되여 책임감을 갖고 임할 자신이 있었기에 컨트롤러를 선택하게 되었습니다.

컨트롤러의 기본 소양을 세가지로 뽑자면

1. 파라미터 값의 분석과 비즈니스 모델을 활용한 결과값을 view 에 넘겨줌

2. 필터, 리스너들을 활용하여 각 url 에 매핑되는 페이지들을 분석하고 데이터 생성 및 넘겨줌

3. 액션 값에 따른 정확한 액션 처리와 부족한 비즈니스 메서드나 파라미터에 대한 협조 및 분석

입니다.

컨트롤러의 시작부분은 초기 데이터 설정 이였습니다.


**12.17 : 크롤링, 웹 리스너를 통하여 초기 데이터 설정**

[성장형 프로그래머 : 네이버 블로그](https://blog.naver.com/wjddn3711/222598314924)

웹 리스너를 100% 활용해보고 싶어 포스팅에서 진행하였던것 처럼 초기 서버 시작시 데이터추가, 서버 종료시 데이터 삭제 라는 방식으로 진행을 하게 되었었는데. 서버를 끄고 키면서 만약 새롭게 크롤링하는 사이트에 데이터가 추가된다면 기존에 담겨져있던 회원의 주문 정보또한 틀어질 수 있다고 판단하여 따로 자바 프로젝트로 관리를 하게 되었습니다.

이는 Controller 의 InitDataCrawler 와 Contructor 를 사용하여 응집도를 높혔으며

중복적으로 사용되는 코드의 양을 줄이고자 getName, getImg 등과 같은 메서드를 사용하여 하나의 class 에 관리하였습니다


CoolSMS API 를 통한 비밀번호 찾기 구현

**12.31 : ajax, coolSms API 를 활용한 ID찾기, 비밀번호 찾기**

[성장형 프로그래머 : 네이버 블로그](https://blog.naver.com/wjddn3711/222610653223)

실험적으로 사용하였던 API 를 다시 활용하여 아직 익숙치 않은 AJAX 와 같이 활용하는 것은 매우 도전적이였으나 완성된 결과물이 뚜렷하여 너무 만족스러웠던 과정이라 생각됩니다

이를 토대로 AJAX 의 사용에 더 익숙해졌으며 웹 사이트에서 보안적인 측면에서도 고려를 할 부분이 많겠다 느꼈습니다

우선 아이디 찾기를 할때 3분의 2만 노출되도록 (나머지는 *로 채움) 구현 해두었으며 임시비밀번호는 랜덤하게 (특수문자를 섞은 알파벳대문자) 생성하여 db에 update 를 진행한 후 문자를 발송해주었습니다

사소하다 생각될 수 있지만 개인정보를 다루는 문제에서 사소한 보안 차이가 크게 다가올 수 있기 때문에 특히나 더 신경썼던 것 같습니다.

그리고 이또한 길어지는 코드나 반복되는 코드를 관리하기 위해 컴포넌트화하여 임시랜덤비밀번호 생성 클래스, 문자보내기 클래스 등을 컴포넌트화 하여 관리하였으며 유지보수적인 측면 또한 고려하여 진행하였습니다

이외에도 장바구니와 관련하여 새로운 객체를 생성하여 세션 등에 저장하였습니다

[성장형 프로그래머 : 네이버 블로그](https://blog.naver.com/wjddn3711/222615426727)

**01.05 : 장바구니와 결제하기 진행하기**

---

# 팀 프로젝트를 하며 배운점들


1. **팀워크**

가장 큰 강점으로는 팀워크라고 할 수 있습니다.

각자 파트가 분리되어 있지만 아까 말씀드렸다시피

본인의 파트 외의 다른 부분에서도 논의나 도움이 필요하면

모두 적극적으로 의견을 나누었습니다.

덕분에 뒤쳐지는 팀원없이 모두 프로젝트의 이해도가 높아 진행에 가속을 더할 수 있었습니다.

이렇게 서로 으쌰으쌰하는 분위기 속에서 프로젝트를 진행하다보니 더욱 즐겁게 임하게되어

좋은 결과물이 나올 수 있었습니다.

1. **효율적인 작업**

11월 30일부터 1월 10일까지의 제한된 시간속에서 더욱 효율적인 작업을 위해

과감히 기능들을 제거한 것도 강점 중 하나입니다.

초기 설계 단계에서는 지금 프로젝트 결과물보다 더 많은 기능들을 넣도록 예정되어있었지만,

사실상 기능이 같은 옵션들은 과감히 제거하여 예상 제작기간을 줄일 수 있었고,

덕분에 프로젝트 보수에 투자한 시간이 길어져 더욱 높은 퀄리티의 작업물이 나오게 되었습니다.

1. **다양한 기능구현**

먼저 ajax를 이용한 비동기식 처리, 초반 데이터 세팅을 위한 웹 크롤링, 주소 API와 coolSMS API 등 다양한 기능을 사용하며 더더욱 다채로운 프로젝트를 만들어 냈습니다.

그리고 깔끔한 페이지 화면도 큰 강점 중 하나라고 할 수 있습니다.

백단에 중점을 둔 프로젝트이지만 디자인적인 요소에도 많은 노력을 했습니다.

1. **MVC 패턴에 맞춘 프로젝트**

★ 가장 중요하게 생각되는 점은 MVC 패턴 2 에 중점을 둔 프로젝트 라는 점입니다

M : 각 파트별 비즈니스 메서드에 대한 구현, VO 와 테이블 생성

V : JSTL, taglib, 커스텀 태그 들을 활용한 응집도를 높히며 중복되는 코드를 줄이는 작업 ( UI, design 은 부수적 )

C : Model 에서 만들어진 비즈니스 메서드를 토대로 View 에서 정확한 데이터를 전달하며 View 에서 필요한 데이터가 무엇인지 전달된 데이터가 어떤것인지 명확히 설명

모든 파트들이 독립적으로 각 영역에서 해당하는 작업들을 다른 곳에 침해하지 않는것을 원칙이자 가장 중요한 핵심으로 작업을 진행하였습니다

View 에서는 자바 코드가 전무 하도록 필요한 데이터를 컨트롤러가 모두 전달하도록 하였으며 비즈니스 메서드를 View 에서 직접 호출하는 경우가 없도록 하였습니다. 또한 컨트롤러에서는 새롭게 비즈니스 메서드를 컨트롤러 내에서 작성이나 사용하지 않으며 필요한 비즈니스 메서드들은 Model 과 협의 후 필요한 메서드들을 효율적으로 만들고 사용하였습니다.

이를 통하여 유지보수성을 높이고 다른 개발자가 보더라도 쉽게 알 수 있도록 직관적인 변수명, 주석사용, 로깅 들을 적극적으로 활용하였습니다

---

# **느낀점**

요구조건분석과 전반적인 프로젝트 설계 과정을 통해 고객들의 니즈를 상세히 파악하기 위해 노력하며,

웹개발자란 단순히 웹을 제작하는것에 그치지 않고 서비스를 제공받는 고객들이 어떠한 고민을 가지고 있을지,

어떻게 편리하고 쉽게 서비스를 사용할 수 있을지 고려해야 한다는 것을 알게되었습니다.

또한, MVC 모델을 기반으로 한 설계 방식을 통해 웹 작동 구조를 학습하였는데요, 사용자 인터페이스를 비지니스 로직과 분리하여 협업시에 여러 개발자들이 독립적으로

기능을 개발할 수 있다는 것을 깨닫게 되었고 이러한 방법이 유지 보수성을 높힌다는것을 알게 되었습니다.

이렇게 요지보수성을 높히는 것이 프로젝트 진행에 있어 얼마나 중요한 역할을 하는지 매 회의때마다 느꼈습니다.

개인 작업을 했으면 배우지 못했을 점들을 협업을 통해 많이 얻었습니다.

이번 프로젝트는 화목한 분위기 속에서 서로 고민하고, 아이디어를 공유하고, 실수를 다잡아주며

팀보단 개인작업이 효율적이다라는 생각을 바꾸게 된 계기가 되었습니다.

이후, 우렁각시 프로젝트가 우리 팀원들 뿐만 아니라 모든 사람들이 이용할 수 있는 사이트가 되도록

웹호스팅을 통해 도메인을 등록할 예정이고, 한 계정당 한 게시글에는 추천이 한번만 가능하게 하고,

상품 목록을 페이지네이션하는 등 더 발전할 부분들을 찾아 보수 및 업그레이드를 진행 할 예정입니다.

우렁각시 팀원들이 보실지는 모르겠지만 너무 감사하고 뜻깊은 시간이되었습니다. 다음에도 이러한 팀프로젝트 기회가 있다면 적극적으로 참여하고 싶습니다.
